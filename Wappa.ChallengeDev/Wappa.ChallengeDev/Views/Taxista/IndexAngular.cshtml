@section scripts {
    <script src="~/lib/angular/angular.js"></script>
    <script src="~/modules/app.js"></script>
    <script src="~/modules/commonDirectives.js"></script>
    <script src="~/modules/taxistaService.js"></script>
    <script src="~/modules/taxistaController.js"></script>
}
<div ng-app="app" ng-controller="taxistaController as ctrl" ng-init="ctrl.init()" ng-cloak>
    <div class="row m-1 p-1">
        <div class="col-12">
            <a class="btn btn-sm btn-primary pull-right" asp-controller="Taxista" asp-action="EditAngular" style="margin-left:10px">
                Novo <i class="fa fa-star"></i>
            </a>
            <a class="btn btn-sm btn-primary pull-right" asp-controller="Taxista" asp-action="Index" style="margin-left:10px">
                Switch to Razor View <i class="fa fa-exchange"></i>
            </a>
        </div>
    </div>

    <div class="row" ng-show="ctrl.filterContext.filteredData.length >0">
        <div class="col-md-12">
            <section class="panel">
                <div class="panel-body">
                    <div>
                        <div class="row" style="padding:10px">
                            <div class="col-lg-1">
                                <select class="form-control input-sm"
                                        ng-model="ctrl.filterContext.pageSize"
                                        ng-options="size for size in ctrl.filterContext.pageSizes"
                                        ng-change="ctrl.updatePages()"></select>
                            </div>
                            <div class="col-lg-3 offset-lg-8">
                                <input type="text" class="form-control input-sm" ng-model="ctrl.filterContext.searchText" placeholder="search..." />
                            </div>
                        </div>
                        <div style="padding:10px">
                            <table class="table table-striped table-advance table-hover sortable">
                                <thead>
                                    <tr>
                                        <th ng-click="ctrl.sort('primeiroNome')">
                                            <span class="fa" ng-show="ctrl.filterContext.sortKey=='primeiroNome'" ng-class="{'fa-chevron-up':ctrl.filterContext.reverse,'fa-chevron-down':!ctrl.filterContext.reverse}"></span>
                                            Nome
                                        </th>
                                        <th ng-click="ctrl.sort('ultimoNome')">
                                            <span class="fa" ng-show="ctrl.filterContext.sortKey=='ultimoNome'" ng-class="{'fa-chevron-up':ctrl.filterContext.reverse,'fa-chevron-down':!ctrl.filterContext.reverse}"></span>
                                            Sobrenome
                                        </th>
                                        <th ng-click="ctrl.sort('endereco')">
                                            <span class="fa" ng-show="ctrl.filterContext.sortKey=='endereco'" ng-class="{'fa-chevron-up':ctrl.filterContext.reverse,'fa-chevron-down':!ctrl.filterContext.reverse}"></span>
                                            Endereço
                                        </th>
                                        <th ng-click="ctrl.sort('latitude')">
                                            <span class="fa" ng-show="ctrl.filterContext.sortKey=='latitude'" ng-class="{'fa-chevron-up':ctrl.filterContext.reverse,'fa-chevron-down':!ctrl.filterContext.reverse}"></span>
                                            Latitue
                                        </th>
                                        <th ng-click="ctrl.sort('longitude')">
                                            <span class="fa" ng-show="ctrl.filterContext.sortKey=='longitude'" ng-class="{'fa-chevron-up':ctrl.filterContext.reverse,'fa-chevron-down':!ctrl.filterContext.reverse}"></span>
                                            Longitude
                                        </th>
                                        <th ng-click="ctrl.sort('marca')">
                                            <span class="fa" ng-show="ctrl.filterContext.sortKey=='marca'" ng-class="{'fa-chevron-up':ctrl.filterContext.reverse,'fa-chevron-down':!ctrl.filterContext.reverse}"></span>
                                            Marca
                                        </th>
                                        <th ng-click="ctrl.sort('modelo')">
                                            <span class="fa" ng-show="ctrl.filterContext.sortKey=='modelo'" ng-class="{'fa-chevron-up':ctrl.filterContext.reverse,'fa-chevron-down':!ctrl.filterContext.reverse}"></span>
                                            Modelo
                                        </th>
                                        <th ng-click="ctrl.sort('placa')">
                                            <span class="fa" ng-show="ctrl.filterContext.sortKey=='placa'" ng-class="{'fa-chevron-up':ctrl.filterContext.reverse,'fa-chevron-down':!ctrl.filterContext.reverse}"></span>
                                            Placa
                                        </th>
                                        <th></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr ng-repeat="item in ctrl.filterContext.filteredData | orderBy:ctrl.filterContext.sortKey:ctrl.filterContext.reverse | startFrom:ctrl.filterContext.currentPage*ctrl.filterContext.pageSize | limitTo:ctrl.filterContext.pageSize" class="bordered">
                                        <td>{{item.primeiroNome}}</td>
                                        <td>{{item.ultimoNome}}</td>
                                        <td>{{item.endereco}}</td>
                                        <td>{{item.latitude}}</td>
                                        <td>{{item.longitude}}</td>
                                        <td>{{item.marca}}</td>
                                        <td>{{item.modelo}}</td>
                                        <td>{{item.placa}}</td>
                                        <td>
                                            <a class="btn btn-sm btn-primary" href="{{'/Taxista/Edit/'+ item.idTaxista}}">
                                                <i class="fa fa-edit"></i>
                                            </a>
                                            <button class="btn btn-sm btn-danger" ng-click="ctrl.delete(item)">
                                                <i class="fa fa-trash"></i>
                                            </button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <div class="row" style="padding:10px">
                            <div class="form-group col-lg-6" style="font-size: 13px; padding-top: 18px;">
                                {{ctrl.filterContext.filteredData.length + " "}} Taxistas Encontrados
                            </div>
                            <div class="form-group col-lg-6">
                                <ul class="pagination pagination-sm pull-right">
                                    <li>
                                        <a href="#" ng-click="ctrl.filterContext.currentPage=0">←← Primeiro</a>
                                    </li>
                                    <li>
                                        <a href="#" n ng-click="ctrl.previousPage()">← Anterior</a>
                                    </li>
                                    <li ng-repeat="n in ctrl.getRange()" ng-class="{ active : ctrl.filterContext.currentPage == n }">
                                        <a href="#" ng-click="ctrl.filterContext.currentPage = n">{{n+1}}</a>
                                    </li>
                                    <li>
                                        <a href="#" ng-click="ctrl.nextPage()">Próximo →</a>
                                    </li>
                                    <li>
                                        <a href="#" ng-click="ctrl.lastPage()">Último →→</a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </div>
</div>